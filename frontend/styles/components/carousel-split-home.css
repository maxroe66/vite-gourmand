@layer components {
	/* =============================
	PRESENTATION & CUBE 3D SPLIT
	4 faces — rotation séquentielle
	============================= */

	.presentation {
		position: relative;
		background: var(--color-bg);
		align-items: center;
		min-height: 0;
		overflow: hidden; /* clippe le débordement 3D sans affecter scroll-snap */
	}

	/* ─── Chevron animé (séparateur cube ↔ avis) ─── */
	.presentation__scroll-hint {
		display: none; /* Masqué par défaut — affiché via media query hauteur */
		justify-content: center;
		align-items: center;
		flex: 0 0 auto;
	}

	.presentation__chevron {
		width: 28px;
		height: 28px;
		border-right: 3px solid var(--color-primary);
		border-bottom: 3px solid var(--color-primary);
		transform: rotate(45deg);
		opacity: 0.5;
		animation: chevron-pulse 2s ease-in-out infinite;
	}

	@keyframes chevron-pulse {
		0%, 100% {
			opacity: 0.3;
			transform: rotate(45deg) translateY(-4px);
		}
		50% {
			opacity: 0.7;
			transform: rotate(45deg) translateY(4px);
		}
	}

	/* Affiche le chevron uniquement sur écrans assez hauts */
	@media (min-height: 850px) {
		.presentation__scroll-hint {
			display: flex;
		}
	}

	/* Container grille — crée l'espace 3D pour les cubes */
	.presentation__content {
		--cube-half-h: 170px; /* fallback — recalculé par JS */
		display: grid;
		grid-template-columns: 1fr 1fr;
		max-width: 1100px;
		min-width: 1000px;
		min-height: 340px;
		background: var(--color-bg-secondary);
		margin: 0 auto;
		border-radius: var(--radius-lg);
		box-shadow: 0 2px 12px rgba(44,62,80,0.07);
		align-items: stretch;
		perspective: 2000px;
		perspective-origin: 50% 50%;
		position: relative;
		flex: 0 1 auto;
		overflow: visible; /* laisse les faces 3D dépasser — .presentation clippe */
	}

	/* Transition d'ombre sur le container (pas sur le cube — filter casse preserve-3d) */
	.presentation__content.is-rotating {
		box-shadow: 0 8px 32px rgba(44,62,80,0.15);
	}

	/* ─── Flèches navigation ─── */
	.presentation__arrows {
		position: absolute;
		top: 50%;
		right: var(--space-4);
		transform: translateY(-50%);
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 10px;
		z-index: var(--z-sticky);
		pointer-events: auto;
	}
	.arrow-btn {
		width: 44px;
		height: 44px;
		background: var(--color-primary);
		color: #fff;
		border: none;
		border-radius: 50%;
		box-shadow: 0 2px 8px rgba(44,62,80,0.10);
		font-size: 2rem;
		display: flex;
		align-items: center;
		justify-content: center;
		cursor: pointer;
		transition: background 0.2s, transform 0.2s;
		outline: none;
	}
	.arrow-btn:hover {
		background: var(--color-primary-600);
		transform: scale(1.08);
	}
	.arrow-btn:active,
	.arrow-btn:focus-visible {
		background: var(--color-primary-600);
		transform: scale(0.95);
	}
	.arrow-btn--down { margin-bottom: 0; }
	.arrow-btn--up { margin-top: 0; }

	/* ─── Indicateurs dots ─── */
	.presentation__indicators {
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 6px;
		margin-top: 4px;
	}
	.presentation__dot {
		width: 8px;
		height: 8px;
		border-radius: 50%;
		background: rgba(44,62,80,0.20);
		transition: background 0.3s ease, transform 0.3s ease;
		cursor: pointer;
	}
	.presentation__dot.is-active {
		background: var(--color-primary);
		transform: scale(1.4);
	}
	.presentation__dot:hover:not(.is-active) {
		background: rgba(44,62,80,0.40);
	}


	/* ========================
	CUBE 3D — Géométrie
	========================

	Chaque demi-cube contient 4 faces positionnées à 90° d'intervalle
	autour de l'axe X, poussées vers l'extérieur par translateZ(halfH).

	Mathématique :
	- containerAngle + faceAngle = 0° quand la face est devant le viewer
	- Cube gauche : container tourne par -90n° → faces à +90n°
	- Cube droit  : container tourne par +90n° → faces à -90n°

	IMPORTANT : Ne JAMAIS ajouter `filter` sur un élément avec
	transform-style: preserve-3d — ça force le rendu 2D (flat).
	======================== */

	.cube {
		width: 100%;
		height: 100%;
		position: relative;
		transform-style: preserve-3d;
		transition: transform 0.9s cubic-bezier(0.22, 1, 0.36, 1);
		will-change: transform;
		display: block;
	}
	.cube--split.cube--left {
		grid-column: 1 / 2;
	}
	.cube--split.cube--right {
		grid-column: 2 / 3;
		transition-delay: 0.15s; /* stagger : l'image suit le texte */
	}

	/* Faces — positionnement 3D */
	.cube__face {
		position: absolute;
		width: 100%;
		height: 100%;
		left: 0;
		top: 0;
		backface-visibility: hidden;
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		overflow: hidden;
	}

	/* Cube gauche (texte) : faces à +90n° */
	.cube--left .cube__face--1 {
		transform: rotateX(0deg) translateZ(var(--cube-half-h));
	}
	.cube--left .cube__face--2 {
		transform: rotateX(90deg) translateZ(var(--cube-half-h));
	}
	.cube--left .cube__face--3 {
		transform: rotateX(180deg) translateZ(var(--cube-half-h));
	}
	.cube--left .cube__face--4 {
		transform: rotateX(270deg) translateZ(var(--cube-half-h));
	}

	/* Cube droit (image) : faces à -90n° (sens opposé) */
	.cube--right .cube__face--1 {
		transform: rotateX(0deg) translateZ(var(--cube-half-h));
	}
	.cube--right .cube__face--2 {
		transform: rotateX(-90deg) translateZ(var(--cube-half-h));
	}
	.cube--right .cube__face--3 {
		transform: rotateX(-180deg) translateZ(var(--cube-half-h));
	}
	.cube--right .cube__face--4 {
		transform: rotateX(-270deg) translateZ(var(--cube-half-h));
	}

	/* Fond solide sur chaque face (pas de transparence = pas de voir-à-travers) */
	.cube__face {
		background: var(--color-bg-secondary);
	}

	/* Coins arrondis par côté */
	.cube--left .cube__face {
		border-radius: var(--radius-lg) 0 0 var(--radius-lg);
	}
	.cube--right .cube__face {
		border-radius: 0 var(--radius-lg) var(--radius-lg) 0;
	}

	/* Contenu de chaque face (texte ou image) */
	.cube__split-content {
		width: 100%;
		height: 100%;
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		text-align: center;
		box-sizing: border-box;
		padding: var(--space-4);
	}
	.cube__split-content h3 {
		margin-bottom: var(--space-4);
	}
	.cube--right .cube__split-content {
		padding: 0;
	}
	.cube--right img {
		width: 100%;
		height: 100%;
		object-fit: cover;
		display: block;
		border-radius: 0 var(--radius-lg) var(--radius-lg) 0;
		box-shadow: 0 2px 8px rgba(44,62,80,0.10);
	}


	/* =========================================
	Responsive Design
	========================================= */

	/* Desktop faible hauteur (≤830px) */
	@media (min-width: 1025px) and (max-height: 830px) {
		.presentation {
			padding: var(--space-4) 0 0;
		}

		.presentation__content {
			min-height: 280px;
			margin-bottom: var(--space-4);
		}

		.cube__split-content {
			padding: var(--space-3);
		}

		.cube__split-content h3 {
			margin-top: var(--space-3);
			margin-bottom: var(--space-3);
			font-size: var(--font-600);
		}

		.cube__split-content p {
			font-size: var(--font-300);
			line-height: var(--lh-normal);
		}

		.arrow-btn {
			width: 40px;
			height: 40px;
			font-size: 1.8rem;
		}
	}

	/* Écrans moyens (1025px - 1200px) */
	@media (min-width: 1025px) and (max-width: 1200px) {
		.presentation {
			padding: var(--space-7) 0 0;
		}

		.presentation__content {
			min-width: 0;
			width: 95%;
			max-width: 950px;
			min-height: 370px;
			margin-bottom: var(--space-6);
		}

		.cube__split-content {
			padding: var(--space-3);
		}

		.cube__split-content h3 {
			font-size: var(--font-600);
			margin-bottom: 0;
			margin-top: var(--space-4);
		}

		.cube__split-content p {
			font-size: var(--font-400);
			line-height: var(--lh-normal);
		}

		.presentation__arrows {
			right: var(--space-4);
		}

		.arrow-btn {
			width: 40px;
			height: 40px;
			font-size: 1.8rem;
		}
	}

	/* Mobile & Tablette (≤ 1024px) — 3D désactivée */
	@media (max-width: 1024px) {
		.presentation {
			padding: var(--space-4) 0 0 0;
			overflow: hidden;
		}

		.presentation__content {
			display: flex;
			flex-direction: column;
			align-items: stretch;
			width: calc(100% - (var(--space-5) * 2));
			max-width: 520px;
			min-width: 0;
			min-height: 0;
			margin: 0 auto var(--space-4);
			padding-bottom: 72px;
			perspective: none;
			overflow: hidden;
		}

		.cube--split.cube--right {
			display: none;
		}

		.cube {
			height: auto;
			transform-style: flat;
			transition: none;
			transform: none !important;
			will-change: auto;
		}

		.cube__face {
			position: static;
			width: 100%;
			height: auto;
			backface-visibility: visible;
			transform: none !important;
			display: none;
			overflow: visible;
			border-radius: 0;
		}
		.cube__face.is-active-face {
			display: flex;
		}
		.cube:not([data-step]) .cube__face--1 {
			display: flex;
		}

		.cube__split-content {
			align-items: flex-start;
			justify-content: flex-start;
			padding: var(--space-6) var(--space-5);
			gap: var(--space-4);
		}
		.cube__split-content h3 {
			width: 100%;
			text-align: center;
			margin: 0;
			color: var(--color-title-primary);
			font-size: var(--font-500);
		}
		.cube__split-content p {
			margin: 0;
			color: var(--color-text);
			font-size: var(--font-300);
			line-height: var(--lh-relaxed);
		}

		.presentation__arrows {
			position: absolute;
			top: auto;
			right: auto;
			left: 50%;
			bottom: var(--space-4);
			transform: translateX(-50%);
			flex-direction: row;
			gap: var(--space-4);
		}
		.arrow-btn {
			width: 40px;
			height: 40px;
			font-size: 1.6rem;
		}
		.arrow-btn--down span,
		.arrow-btn--up span {
			display: inline-block;
			transform: rotate(-90deg);
		}

		.presentation__indicators {
			flex-direction: row;
			margin-top: 0;
			margin-left: 4px;
		}
	}
} /* end @layer components */
