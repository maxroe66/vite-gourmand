# =============================================================================
# Vite & Gourmand — Configuration DEV locale
# =============================================================================
# Copier ce fichier : cp .env.example .env
# Lancer directement : docker compose up -d
#
# Les valeurs par défaut fonctionnent telles quelles avec Docker Compose.
# Vous pouvez les modifier si besoin, mais ce n'est pas obligatoire.
#
# SÉCURITÉ : Les credentials externes inclus ci-dessous (Mailtrap, Google Maps)
# sont des clés restreintes/sandbox dédiées à la démonstration locale.
# - Mailtrap : inbox sandbox (aucun vrai email n'est délivré)
# - Google Maps : clé restreinte à localhost uniquement
# Ces clés ne permettent aucun accès à des données ou services de production.
# =============================================================================

# APPLICATION
APP_ENV=development
APP_DEBUG=true

# =============================================================================
# BASE DE DONNÉES — MySQL (Backend PHP)
# =============================================================================
# DB_HOST est surchargé par docker-compose.yml (→ "mysql" dans le réseau Docker)
# Ces valeurs sont utilisées par le backend PHP pour se connecter à MySQL.
DB_HOST=127.0.0.1
DB_PORT=3306
DB_NAME=vite_gourmand
DB_USER=root
DB_PASS=rootpass

# =============================================================================
# BASE DE DONNÉES — MongoDB (Backend PHP)
# =============================================================================
# MONGO_HOST est surchargé par docker-compose.yml (→ "mongodb" dans le réseau Docker)
# Ne PAS définir MONGO_URI ici : le backend la construit automatiquement
# à partir de MONGO_HOST, MONGO_PORT, MONGO_USERNAME et MONGO_PASSWORD.
MONGO_HOST=127.0.0.1
MONGO_PORT=27017
MONGO_DB=vite_gourmand
MONGO_USERNAME=root
MONGO_PASSWORD=rootpass

# =============================================================================
# JWT — Secret pour les tokens d'authentification
# =============================================================================
# En développement, un secret par défaut est utilisé automatiquement si vide.
# En production, générer avec : openssl rand -hex 32
JWT_SECRET=

# =============================================================================
# MAIL — Service SMTP (Mailtrap sandbox)
# =============================================================================
# Mailtrap est un service de sandbox email : les emails sont capturés et
# consultables via le dashboard, mais JAMAIS délivrés à de vrais destinataires.
#
# Pour consulter les emails envoyés par l'application :
#   → Connexion : https://mailtrap.io/signin
#   → Email : contact@vite-et-gourmand.me
#   → Mot de passe : ?34*h8rPG3gJzXv
#   → Inbox : "My Sandbox" (Email Testing → Inboxes)
#
# Si vous souhaitez utiliser votre propre compte Mailtrap, créez un compte
# gratuit sur https://mailtrap.io et remplacez les valeurs ci-dessous.
MAIL_HOST=sandbox.smtp.mailtrap.io
MAIL_USERNAME=0cbcc6eb58b378
MAIL_PASSWORD=167e9b398e854b
MAIL_FROM_ADDRESS=noreply@vitegourmand.fr
# Adresse de réception des messages du formulaire de contact
CONTACT_EMAIL=contact@vite-et-gourmand.me

# =============================================================================
# GOOGLE MAPS — API Distance Matrix
# =============================================================================
# Utilisé pour le calcul réel des frais de livraison (distance routière).
# Cette clé est restreinte : elle ne fonctionne que depuis localhost (HTTP
# referrer) et n'a accès qu'à l'API Distance Matrix.
#
# Sans clé valide, l'application utilise une estimation forfaitaire (15 km
# si code postal 33xxx, 50 km sinon) au lieu du calcul réel.
GOOGLE_MAPS_API_KEY=AIzaSyAM9cfdwk_DA2zB-pxKATxUFpB3n9OU5Ys

# =============================================================================
# DOCKER COMPOSE — Variables interpolées par docker-compose.yml
# =============================================================================
# Ces variables configurent les containers MySQL, MongoDB, phpMyAdmin et
# Mongo Express. Les mots de passe DOIVENT correspondre à ceux définis
# ci-dessus (DB_PASS ↔ MYSQL_ROOT_PASSWORD, MONGO_PASSWORD ↔ MONGO_INITDB_ROOT_PASSWORD).

MYSQL_ROOT_PASSWORD=rootpass
MYSQL_DATABASE=vite_gourmand
MYSQL_USER=vite_user
MYSQL_PASSWORD=vitepass

MYSQL_TEST_ROOT_PASSWORD=rootpass
MYSQL_TEST_DATABASE=vite_gourmand_test
MYSQL_TEST_USER=vite_user
MYSQL_TEST_PASSWORD=vitepass

MONGO_INITDB_DATABASE=vite_gourmand
MONGO_INITDB_ROOT_USERNAME=root
MONGO_INITDB_ROOT_PASSWORD=rootpass

MONGO_TEST_INITDB_DATABASE=vite_gourmand_test
MONGO_TEST_INITDB_ROOT_USERNAME=root
MONGO_TEST_INITDB_ROOT_PASSWORD=rootpass

PMA_USER=root
PMA_PASSWORD=rootpass

ME_MONGO_ADMINUSERNAME=root
ME_MONGO_ADMINPASSWORD=rootpass
ME_MONGO_URL=mongodb://root:rootpass@mongodb:27017

# =============================================================================
# ADMIN — Mot de passe initial du compte administrateur
# =============================================================================
# Utilisé par scripts/setup/setup-admin-password.php pour initialiser le compte admin
# Doit contenir au moins 12 caractères, 1 majuscule, 1 minuscule, 1 chiffre, 1 caractère spécial
ADMIN_INITIAL_PASSWORD=<VOTRE_MOT_DE_PASSE_ADMIN>
