# =============================================================================
# Vite & Gourmand — Configuration DEV locale
# =============================================================================
# Copier ce fichier : cp .env.example .env
# Lancer directement : docker compose up -d
#
# Les valeurs par défaut fonctionnent telles quelles avec Docker Compose.
# Vous pouvez les modifier si besoin, mais ce n'est pas obligatoire.
# =============================================================================

# APPLICATION
APP_ENV=development
APP_DEBUG=true

# =============================================================================
# BASE DE DONNÉES — MySQL (Backend PHP)
# =============================================================================
# DB_HOST est surchargé par docker-compose.yml (→ "mysql" dans le réseau Docker)
# Ces valeurs sont utilisées par le backend PHP pour se connecter à MySQL.
DB_HOST=127.0.0.1
DB_PORT=3306
DB_NAME=vite_gourmand
DB_USER=root
DB_PASS=rootpass

# =============================================================================
# BASE DE DONNÉES — MongoDB (Backend PHP)
# =============================================================================
# MONGO_HOST est surchargé par docker-compose.yml (→ "mongodb" dans le réseau Docker)
# Ne PAS définir MONGO_URI ici : le backend la construit automatiquement
# à partir de MONGO_HOST, MONGO_PORT, MONGO_USERNAME et MONGO_PASSWORD.
MONGO_HOST=127.0.0.1
MONGO_PORT=27017
MONGO_DB=vite_gourmand
MONGO_USERNAME=root
MONGO_PASSWORD=rootpass

# =============================================================================
# JWT — Secret pour les tokens d'authentification
# =============================================================================
# En développement, un secret par défaut est utilisé automatiquement si vide.
# En production, générer avec : openssl rand -hex 32
JWT_SECRET=

# =============================================================================
# MAIL — Service SMTP (optionnel en DEV)
# =============================================================================
# Sans configuration Mailtrap, les emails ne seront pas envoyés.
# L'application fonctionne normalement sans (inscription, commandes, etc.).
# Pour tester les emails : créer un compte gratuit sur https://mailtrap.io
MAIL_HOST=sandbox.smtp.mailtrap.io
MAIL_USERNAME=
MAIL_PASSWORD=
MAIL_FROM_ADDRESS=noreply@vitegourmand.fr

# =============================================================================
# GOOGLE MAPS — API Distance Matrix (optionnel)
# =============================================================================
# Utilisé pour le calcul des frais de livraison.
# Sans clé, le calcul de distance ne sera pas disponible.
# Créer une clé sur https://console.cloud.google.com (activer Distance Matrix API)
GOOGLE_MAPS_API_KEY=

# =============================================================================
# DOCKER COMPOSE — Variables interpolées par docker-compose.yml
# =============================================================================
# Ces variables configurent les containers MySQL, MongoDB, phpMyAdmin et
# Mongo Express. Les mots de passe DOIVENT correspondre à ceux définis
# ci-dessus (DB_PASS ↔ MYSQL_ROOT_PASSWORD, MONGO_PASSWORD ↔ MONGO_INITDB_ROOT_PASSWORD).

MYSQL_ROOT_PASSWORD=rootpass
MYSQL_DATABASE=vite_gourmand
MYSQL_USER=vite_user
MYSQL_PASSWORD=vitepass

MYSQL_TEST_ROOT_PASSWORD=rootpass
MYSQL_TEST_DATABASE=vite_gourmand_test
MYSQL_TEST_USER=vite_user
MYSQL_TEST_PASSWORD=vitepass

MONGO_INITDB_DATABASE=vite_gourmand
MONGO_INITDB_ROOT_USERNAME=root
MONGO_INITDB_ROOT_PASSWORD=rootpass

MONGO_TEST_INITDB_DATABASE=vite_gourmand_test
MONGO_TEST_INITDB_ROOT_USERNAME=root
MONGO_TEST_INITDB_ROOT_PASSWORD=rootpass

PMA_USER=root
PMA_PASSWORD=rootpass

ME_MONGO_ADMINUSERNAME=root
ME_MONGO_ADMINPASSWORD=rootpass
ME_MONGO_URL=mongodb://root:rootpass@mongodb:27017

# =============================================================================
# ADMIN — Mot de passe initial du compte administrateur
# =============================================================================
# Utilisé par scripts/setup/setup-admin-password.php pour initialiser le compte admin
ADMIN_INITIAL_PASSWORD=Admin123!
